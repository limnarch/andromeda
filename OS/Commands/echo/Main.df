#include "<df>/dragonfruit.h"

#include "<ll>/OSDLL/OS.h"

fn Main { ... -- ret }
	0 ret!

	while (1)
		auto phandle
		auto thandle
		auto ok

		"/mintia/bin/echo.exe"
		0
		0
		ACCESS_OWNER_ALL
		0
		OSSpawn ok! phandle! thandle!

		if (ok@)
			ok@ OSStatusGetName "%s\n" Printf
			return
		end

		phandle@ OSClose drop
		thandle@ OSClose drop
	end

	auto i
	1 i!

	while (i@ argc@ <)
		[i@]argv@ "%s" Printf

		if (i@ argc@ 1 - ~=)
			' ' Putc
		end else
			'\n' Putc
		end

		1 i +=
	end
end